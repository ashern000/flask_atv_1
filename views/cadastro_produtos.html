{% extends 'base.html' %}

{% block content %}
    <div id="loading-screen" style="display: none;">
        <div class="spinner"></div>
    </div>
    <h2>Cadastro de produtos de infra</h2>
 
    <form id="productForm" action="{{url_for('products_cad')}}" method="POST" onsubmit="showLoadingScreen()">
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="nome">Nome:</label>
                <input type="text" class="form-control" id="nome" name="nome" required>
            </div>
            <div class="form-group col-md-4">
                <label for="ano">Ano:</label>
                <input type="text" class="form-control" id="ano" name="ano" required>
            </div>
            <div class="form-group col-md-4">
                <label for="categoria">Categoria:</label>
                <input type="text" class="form-control" id="categoria" name="categoria" required>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Cadastrar</button>
    </form>
    
    <br>
 
    <h4>Produtos cadastrados:</h4>
    <table class="table table-bordered">
        <tr>
            <th style="width: 100px;">Nome:</th>
            <th style="width: 100px;">Ano:</th>
            <th style="width: 100px;">Categoria:</th>
        </tr>
        
    {% for product in productsIt %}
        <tr>
            <td>{{product.Nome}}</td>
            <td>{{product.Ano}}</td>
            <td>{{product.Categoria}}</td>
        </tr>
    {% endfor %}     
    </table>
    <script>
        function showLoadingScreen(event) {
            event.preventDefault(); // Impede o envio imediato do formulário
            document.getElementById('loading-screen').style.display = 'flex';
    
            // Espera 1 segundo antes de enviar o formulário
            setTimeout(function() {
                document.getElementById('productForm').submit();
            }, 1000); // 1000 milissegundos = 1 segundo
        }
    </script>
{% endblock content %}

